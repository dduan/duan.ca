<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Daniel Duan">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://duan.ca/2016/05/19/a-case-for-oop/">
    <meta property="og:site_name" content="Daniel Duan's Website">
    <meta property="og:type" content="article">
    <meta property="og:title" content="A Case For OOP?">
    <meta property="article:published_time" content="2016-05-19T12:03:02-07:00"><meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@daniel_duan">
    <meta name="twitter:creator" content="@Daniel Duan">
    <meta name="apple-mobile-web-app-title" content="Daniel Duan">
    <title>A Case For OOP?</title>
    <link rel="alternate" type="application/rss+xml" title="Daniel Duan's Website" href="/feed.xml">
    <link rel="canonical" href="https://duan.ca/2016/05/19/a-case-for-oop/">
    <link rel="stylesheet" href="/styles.css"></link>
    <link rel="shortcut icon" href="/favicon.ico">
</head>
<body><article>
    <h1>A Case For OOP?</h1>
    <nav>
        <p class="metainfo article-meta">
            <a href="/articles">Daniel Duan</a>
            路
            <time datetime="2016-05-19T12:03:02-07:00" itemProp="datePublished">2016-05-19</time>
        </p>
    </nav><p>Python's standard library includes a very handy <code>defaultdict</code>. It behaves
almost exactly like the standard dictionary except it'll supply a pre-defined
value for any non-existence keys. It is, unsurpringly, a subclass of <code>dict</code>.</p>
<p>I find my self missing this handy container in Swift. Especially when I use
a normal <code>Dictionary</code> to accumulate/coalesce values under distinct keys. So I
wrote my own:</p>
<script src="https://gist.github.com/dduan/31ed39c4c98ecb88290f0743cb394c20.js"></script>
<p>There are a few noticable things about this implementation:</p>
<ul>
<li>It does not conform to the <code>DictionaryLiteralConvertible</code> protocol, for no
good reasons, really. The initializer in this protocol takes a varadic
argument. There's no conevient way to forward this array to a normal
dictionary's initializer (incidentally, this is a Swift feature I really
want). Plus, I don't need <code>DefaultDictionary</code> to be a literal convertible.</li>
<li>Most of the code, including the imaginary <code>init</code> mentioned in previous
point, simply reuses stuff from <code>Dictionary</code>: asscociated type, indexes,
generator, subscript, etc.</li>
</ul>
<p>In comparison, Python implements <code>defaultdict</code> in a more intuitive way -- via
inheritance.</p>
<p>But do we want inheritance for <code>struct</code>s and <code>enum</code>s in Swift? What does that
even mean? Is it simply a case that will go away when protocols become more
powerful?</p>

</article>
<footer>
    <hr />
    <p class="metainfo article-meta">
        <a href="/articles/">More Articles</a>
        路
        <a href="/tag/python/">Python</a>
        路
        <a href="/tag/oop/">OOP</a>
        路
        <a href="/tag/swift/">Swift</a>
    </p>
</footer></body>
</html>