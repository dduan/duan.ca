<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Daniel Duan">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://duan.ca/2020/04/13/git-commit-comment/">
    <meta property="og:site_name" content="Daniel Duan's Website">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Git Commit Message, Vim, and Markdown">
    <meta property="article:published_time" content="2020-04-13"><meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@daniel_duan">
    <meta name="twitter:creator" content="@Daniel Duan">
    <meta name="apple-mobile-web-app-title" content="Daniel Duan">
    <title>Git Commit Message, Vim, and Markdown</title>
    <link rel="alternate" type="application/rss+xml" title="Daniel Duan's Website" href="/feed.xml">
    <link rel="canonical" href="https://duan.ca/2020/04/13/git-commit-comment/">
    <link rel="stylesheet" href="/styles.css"></link>
    <link rel="shortcut icon" href="/favicon.ico">
</head>
<body><article>
    <h1>Git Commit Message, Vim, and Markdown</h1>
    <nav>
        <p class="metainfo article-meta">
            <a href="/">Daniel Duan</a>
            ·
            <time datetime="2020-04-13" itemProp="datePublished">2020-04-13</time>
        </p>
    </nav><p>It's been bothering me for years.</p>
<p>That is, <code>#</code> is both the start of a comment in a git commit message, but also
the syntax for headings in Markdown.</p>
<p>Personally, I prefer using commit messages to populate pull request descriptions
whenever possible. On GitHub, This happens automatically when the pull request
contains a single commit. But I can't type, say an H3 as <code>### Heading</code> in the
commit message (in Vim, most of the time) because it gets treated as a comment!</p>
<p>But thanks to this twitter interaction with <a href="https://twitter.com/dmartincy">@dmartincy</a>, I finally solved
this problem:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I haven&#39;t found myself in that situation, but maybe you could do &#39;git config core.commentChar &quot;;&quot;&#39; before creating the commits? That will change the default git commit marker (#) to something that won&#39;t conflict with Markdown titles.</p>&mdash; Daniel Martín (@dmartincy) <a href="https://twitter.com/dmartincy/status/1247271508420026368?ref_src=twsrc%5Etfw">April 6, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>As mentioned by Daniel, Git has introduced a setting called <code>core.commentChar</code>,
documented <a href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-corecommentChar">here</a>, which lets us control which character
becomes the start of a comment line. Let's say we want to replace the default
<code>#</code> with <code>;</code>, we can edit <code>~/.gitconfig</code> to include this preference:</p>
<pre><code>[core]
	commentChar = &quot;;&quot;
</code></pre>
<p>… and this will affect every Git repository on this computer.</p>
<p>For me, though, this broke git commit syntax highlighting in Vim: the comments,
beginning with <code>;</code>, are no longer recognized as comments. To fix this, I updated
Vim's syntax for file type <code>gitcommit</code>. In your Vim setting directory
(<code>~/.config/nvim/</code> for me), create a file <code>syntax/gitcommit.vim</code> file (unless
you already have one), add the following line:</p>
<pre><code>syn match gitcommitComment	&quot;^;.*&quot;
</code></pre>
<p>Note <code>;</code> matches my preferred <code>core.commentChar</code> for Git.</p>
<p>Et voilà! Git commit message looks tippy-top in Vim again!</p>
<p><img src="/assets/2020/04/gitcommit.png" alt="editing git commit in vim, with alternative character being the beginning of a comment" /></p>

</article>
<footer>
    <hr />
    <p class="metainfo article-meta">
        <a href="/articles/">More Articles</a>
        ·
        <a href="/tag/git/">Git</a>
        ·
        <a href="/tag/vim/">Vim</a>
        ·
        <a href="/tag/markdown/">Markdown</a>
        ·
        <a href="/tag/github/">GitHub</a>
    </p>
</footer></body>
</html>